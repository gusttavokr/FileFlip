<div class="flex items-center justify-center text-center text-[#03133A]">
  <div class="w-full px-4">
    <h1 class="text-5xl font-bold">Conversor de arquivos</h1>
    <p class="text-center font-normal mt-4">
      Converta seus arquivos na melhor plataforma <b>da AmÃ©rica!</b> ðŸŒŽ
    </p>

    <div class="card max-w-3xl mx-auto mt-8 h-[22rem] overflow-hidden mb-10">
      <p-toast></p-toast>
      <p-fileupload
        #fileUploadComp
        styleClass="h-full overflow-y-auto"
        name="myfile[]"
        url="https://www.primefaces.org/cdn/api/upload.php"
        [multiple]="false"
        maxFileSize="1000000000"
        (onUpload)="onTemplatedUpload()"
        (onSelect)="onSelectedFiles($event)"
        accept=".pdf,.txt,.docx,.doc,.jpg,.jpeg,.png,.svg,.webp,.mp4,video/mp4,.mp3,audio/mp3,audio/mpeg,.wav,audio/wav,.m4a,audio/x-m4a,.zip,application/zip,.rar,application/x-rar-compressed"
      >
        <ng-template #header let-files let-chooseCallback="chooseCallback" let-clearCallback="clearCallback"
          let-uploadCallback="uploadCallback">
          <div class="flex flex-wrap justify-between items-center flex-1 gap-4">
            <div class="flex gap-2">
              <button pButton type="button" (click)="choose($event, chooseCallback)" icon="pi pi-images"
                class="p-button-outlined p-button-rounded"></button>
              <button pButton type="button" (click)="clearCallback()" icon="pi pi-times"
                class="p-button-outlined p-button-rounded p-button-danger"
                [disabled]="!files || files.length === 0"></button>
            </div>
            <div class="flex-1 md:ml-auto">
              <p-progressbar [value]="totalSizePercent" [showValue]="false" class="h-1">
                <span class="whitespace-nowrap">{{ totalSize }}B / 10Mb</span>
              </p-progressbar>
            </div>
          </div>
        </ng-template>

        <ng-template #file></ng-template>

        <ng-template #empty>
          <div class="flex items-center justify-center flex-col h-full pt-10">
            <i class="pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color"></i>
            <p class="mt-6 mb-0">Arraste e solte os arquivos aqui para fazer o upload.</p>
          </div>
        </ng-template>

        <ng-template #content let-files let-removeFileCallback="removeFileCallback">
          <ng-container *ngIf="files?.length > 0">
            <div class="flex flex-col gap-4 pt-4 max-h-[calc(100vh-400px)] overflow-y-auto">
              <div class="flex flex-wrap gap-4">
                <div *ngFor="let file of files; let i = index"
                  class="p-4 rounded-border flex border border-surface items-center gap-4">
                  <div class="w-[50px] h-[50px] flex items-center justify-center overflow-hidden">
                    <i class="pi pi-file" style="font-size: 2rem"></i>
                  </div>
                  <span class="font-semibold text-ellipsis max-w-60 whitespace-nowrap overflow-hidden">{{ file.name }}</span>
                  <div>{{ formatSize(file.size) }}</div>
                  <button pButton icon="pi pi-times"
                    (click)="onRemoveTemplatingFile($event, file, removeFileCallback, i)"
                    class="p-button-outlined p-button-rounded p-button-danger"></button>
                </div>
              </div>
              <div *ngIf="files?.length > 0">
                <p-toast></p-toast>
                <div class="card">
                  <form #exampleForm="ngForm" (ngSubmit)="onSubmit(exampleForm)"
                    class="flex flex-col gap-0 w-full w-full">
                    <div class="flex flex-col gap-4">
                      <p-select #city="ngModel" name="city" [(ngModel)]="formatoSelecionado" [options]="formatos"
                        [invalid]="city.invalid && (city.touched || exampleForm['submitted'])"
                        optionLabel="name"
                        placeholder="Selecione o formato" class="w-full md:w-56" appendTo="body" required>
                      </p-select>

                      <ng-container *ngIf="city.invalid && (city.touched || exampleForm['submitted'])">
                        <p-message severity="error" size="small" variant="simple">O formato Ã© obrigatÃ³rio.</p-message>
                      </ng-container>
                      <button pButton type="submit" label="Converter"
                        class="bg-blue-600 border-0 hover:bg-[#03133A] w-full"></button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </ng-container>
        </ng-template>
      </p-fileupload>
    </div>
    <div class="justify-center">
      <h2 class="text-5xl font-bold">Por que usar?</h2>
      <p class="text-center font-normal mt-4">
        Quais benefÃ­cios vocÃª ganha em usar o <b>FileFlip!</b> ðŸ¤–
      </p>
    </div>
  </div>
</div>
<div class="flex justify-center pt-10 pb-10">
  <app-card-simples></app-card-simples>
</div>
